import{j as e}from"./jsx-runtime-0DLF9kdB.js";import{k as y,s as k}from"./index-USkqr3S0.js";import{r as f}from"./index-BJYSoprK.js";import{F as P,L as d,u as b}from"./components-y71cCI0k.js";import{u as o}from"./search-DOeYwaXi.js";import{I as g}from"./Image-C8hgQviM.js";import{M as S}from"./Money-gTdCFF4I.js";function p({children:t,...r}){const s=f.useRef(null);return E(s),typeof t!="function"?null:e.jsx(P,{method:"get",...r,children:t({inputRef:s})})}function E(t){f.useEffect(()=>{function r(s){var n,a;s.key==="k"&&s.metaKey&&(s.preventDefault(),(n=t.current)==null||n.focus()),s.key==="Escape"&&((a=t.current)==null||a.blur())}return document.addEventListener("keydown",r),()=>{document.removeEventListener("keydown",r)}},[t])}function l({term:t,result:r,children:s}){return r!=null&&r.total?s({...r.items,term:t}):null}l.Articles=L;l.Pages=N;l.Products=F;l.Empty=R;function L({term:t,articles:r}){var s;return r!=null&&r.nodes.length?e.jsxs("div",{className:"search-result",children:[e.jsx("h2",{children:"Articles"}),e.jsx("div",{children:(s=r==null?void 0:r.nodes)==null?void 0:s.map(n=>{const a=o({baseUrl:`/blogs/${n.handle}`,trackingParams:n.trackingParameters,term:t});return e.jsx("div",{className:"search-results-item",children:e.jsx(d,{prefetch:"intent",to:a,children:n.title})},n.id)})}),e.jsx("br",{})]}):null}function N({term:t,pages:r}){var s;return r!=null&&r.nodes.length?e.jsxs("div",{className:"search-result",children:[e.jsx("h2",{children:"Pages"}),e.jsx("div",{children:(s=r==null?void 0:r.nodes)==null?void 0:s.map(n=>{const a=o({baseUrl:`/pages/${n.handle}`,trackingParams:n.trackingParameters,term:t});return e.jsx("div",{className:"search-results-item",children:e.jsx(d,{prefetch:"intent",to:a,children:n.title})},n.id)})}),e.jsx("br",{})]}):null}function F({term:t,products:r}){return r!=null&&r.nodes.length?e.jsxs("div",{className:"search-result",children:[e.jsx("h2",{children:"Products"}),e.jsx(y,{connection:r,children:({nodes:s,isLoading:n,NextLink:a,PreviousLink:c})=>{const h=s.map(i=>{var x,j;const v=o({baseUrl:`/products/${i.handle}`,trackingParams:i.trackingParameters,term:t}),m=(x=i==null?void 0:i.selectedOrFirstAvailableVariant)==null?void 0:x.price,u=(j=i==null?void 0:i.selectedOrFirstAvailableVariant)==null?void 0:j.image;return e.jsx("div",{className:"search-results-item",children:e.jsxs(d,{prefetch:"intent",to:v,children:[u&&e.jsx(g,{data:u,alt:i.title,width:50}),e.jsxs("div",{children:[e.jsx("p",{children:i.title}),e.jsx("small",{children:m&&e.jsx(S,{data:m})})]})]})},i.id)});return e.jsxs("div",{children:[e.jsx("div",{children:e.jsx(c,{children:n?"Loading...":e.jsx("span",{children:"↑ Load previous"})})}),e.jsxs("div",{children:[h,e.jsx("br",{})]}),e.jsx("div",{children:e.jsx(a,{children:n?"Loading...":e.jsx("span",{children:"Load more ↓"})})})]})}}),e.jsx("br",{})]}):null}function R(){return e.jsx("p",{children:"No results, try a different search."})}const M=()=>[{title:"Hydrogen | Search"}];function O(){const{type:t,term:r,result:s,error:n}=b();return t==="predictive"?null:e.jsxs("div",{className:"search",children:[e.jsx("h1",{children:"Search"}),e.jsx(p,{children:({inputRef:a})=>e.jsxs(e.Fragment,{children:[e.jsx("input",{defaultValue:r,name:"q",placeholder:"Search…",ref:a,type:"search"})," ",e.jsx("button",{type:"submit",children:"Search"})]})}),n&&e.jsx("p",{style:{color:"red"},children:n}),!r||!(s!=null&&s.total)?e.jsx(l.Empty,{}):e.jsx(l,{result:s,term:r,children:({articles:a,pages:c,products:h,term:i})=>e.jsxs("div",{children:[e.jsx(l.Products,{products:h,term:i}),e.jsx(l.Pages,{pages:c,term:i}),e.jsx(l.Articles,{articles:a,term:i})]})}),e.jsx(k.SearchView,{data:{searchTerm:r,searchResults:s}})]})}export{O as default,M as meta};
